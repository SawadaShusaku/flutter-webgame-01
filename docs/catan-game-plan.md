# ã‚«ã‚¿ãƒ³é¢¨ãƒœãƒ¼ãƒ‰ã‚²ãƒ¼ãƒ  é–‹ç™ºè¨ˆç”»æ›¸

## ç›®æ¬¡
1. [ã‚²ãƒ¼ãƒ æ¦‚è¦](#ã‚²ãƒ¼ãƒ æ¦‚è¦)
2. [åŸºæœ¬ãƒ«ãƒ¼ãƒ«](#åŸºæœ¬ãƒ«ãƒ¼ãƒ«)
3. [ã‚²ãƒ¼ãƒ è¦ç´ ](#ã‚²ãƒ¼ãƒ è¦ç´ )
4. [ãƒ‡ãƒ¼ã‚¿æ§‹é€ è¨­è¨ˆ](#ãƒ‡ãƒ¼ã‚¿æ§‹é€ è¨­è¨ˆ)
5. [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ](#ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ)
6. [UIè¨­è¨ˆ](#uiè¨­è¨ˆ)
7. [å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º](#å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º)
8. [JSONãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ ](#jsonãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ )

---

## ã‚²ãƒ¼ãƒ æ¦‚è¦

### ã‚³ãƒ³ã‚»ãƒ—ãƒˆ
- ã‚«ã‚¿ãƒ³ï¼ˆSettlers of Catanï¼‰ã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ãŸè³‡æºç®¡ç†ãƒ»å»ºè¨­ãƒœãƒ¼ãƒ‰ã‚²ãƒ¼ãƒ 
- ã‚·ãƒ³ãƒ—ãƒ«ãªã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ï¼ˆ2Dã€å¹¾ä½•å­¦å›³å½¢ï¼‰
- 3-4äººãƒ—ãƒ¬ã‚¤å¯¾å¿œï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯4äººã‹ã‚‰å®Ÿè£…ï¼‰
- ã‚²ãƒ¼ãƒ çŠ¶æ…‹ã¯JSONãƒ•ã‚¡ã‚¤ãƒ«ã§ä¿å­˜ãƒ»èª­ã¿è¾¼ã¿
- CPUãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯æœ€åˆã¯ç°¡æ˜“çš„ãªãƒ­ã‚¸ãƒƒã‚¯ã¦ã¾å®Ÿè£…

### å‹åˆ©æ¡ä»¶
- 10å‹åˆ©ç‚¹ã‚’å…ˆã«ç²å¾—ã—ãŸãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒå‹åˆ©

---

## åŸºæœ¬ãƒ«ãƒ¼ãƒ«

### 1. ã‚²ãƒ¼ãƒ ãƒœãƒ¼ãƒ‰
- å…­è§’å½¢ã‚¿ã‚¤ãƒ«19æšã§æ§‹æˆã•ã‚Œã‚‹å³¶
- å„ã‚¿ã‚¤ãƒ«ã¯è³‡æºã‚’ç”Ÿç”£ï¼ˆæ£®ã€ä¸˜é™µã€ç‰§è‰åœ°ã€ç•‘ã€å±±ã€ç ‚æ¼ ï¼‰
- å„ã‚¿ã‚¤ãƒ«ï¼ˆç ‚æ¼ é™¤ãï¼‰ã«ã¯æ•°å­—ãƒãƒƒãƒ—ï¼ˆ2-12ï¼‰ã‚’é…ç½®

### 2. è³‡æºã®ç¨®é¡
| è³‡æº | åœ°å½¢ | ã‚¢ã‚¤ã‚³ãƒ³ |
|------|------|----------|
| æœ¨æ | æ£® | ğŸŒ² |
| ãƒ¬ãƒ³ã‚¬ | ä¸˜é™µ | ğŸ§± |
| ç¾Šæ¯› | ç‰§è‰åœ° | ğŸ‘ |
| å°éº¦ | ç•‘ | ğŸŒ¾ |
| é‰±çŸ³ | å±± | â›°ï¸ |

### 3. å»ºè¨­ç‰©ã¨å¿…è¦è³‡æº

#### é“è·¯ï¼ˆ1å‹åˆ©ç‚¹ãªã—ï¼‰
- æœ¨æ x1 + ãƒ¬ãƒ³ã‚¬ x1

#### é›†è½ï¼ˆ1å‹åˆ©ç‚¹ï¼‰
- æœ¨æ x1 + ãƒ¬ãƒ³ã‚¬ x1 + ç¾Šæ¯› x1 + å°éº¦ x1

#### éƒ½å¸‚ï¼ˆ2å‹åˆ©ç‚¹ï¼‰
- å°éº¦ x2 + é‰±çŸ³ x3ï¼ˆé›†è½ã‹ã‚‰æ˜‡æ ¼ï¼‰

#### ç™ºå±•ã‚«ãƒ¼ãƒ‰ï¼ˆè³¼å…¥ï¼‰
- ç¾Šæ¯› x1 + å°éº¦ x1 + é‰±çŸ³ x1

### 4. ç™ºå±•ã‚«ãƒ¼ãƒ‰
- é¨å£«ï¼ˆ14æšï¼‰ï¼šç›—è³Šã‚’ç§»å‹•
- å‹åˆ©ç‚¹ï¼ˆ5æšï¼‰ï¼š1å‹åˆ©ç‚¹
- è¡—é“å»ºè¨­ï¼ˆ2æšï¼‰ï¼šé“è·¯2æœ¬ç„¡æ–™å»ºè¨­
- è³‡æºç‹¬å ï¼ˆ2æšï¼‰ï¼šç‰¹å®šè³‡æºã‚’å…¨å“¡ã‹ã‚‰å¥ªå–
- è³‡æºç™ºè¦‹ï¼ˆ2æšï¼‰ï¼šå¥½ããªè³‡æº2æšç²å¾—

### 5. ã‚¿ãƒ¼ãƒ³ã®æµã‚Œ

```
1. ã‚µã‚¤ã‚³ãƒ­ã‚’æŒ¯ã‚‹ï¼ˆ2å€‹ã€2-12ã®ç›®ï¼‰
   - å‡ºãŸç›®ã«å¯¾å¿œã™ã‚‹ã‚¿ã‚¤ãƒ«ãŒè³‡æºã‚’ç”Ÿç”£
   - ãã®å‘¨è¾ºã«é›†è½/éƒ½å¸‚ã‚’æŒã¤ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒè³‡æºç²å¾—
   - 7ãŒå‡ºãŸå ´åˆï¼š
     * è³‡æº8æšä»¥ä¸Šã®ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯åŠåˆ†æ¨ã¦ã‚‹
     * ç›—è³Šã‚’ç§»å‹•ã•ã›ã‚‹

2. äº¤æ˜“ï¼ˆä»»æ„ï¼‰
   - éŠ€è¡Œäº¤æ˜“ï¼šåŒã˜è³‡æº4æšâ†’å¥½ããªè³‡æº1æš
   - æ¸¯äº¤æ˜“ï¼šç‰¹å®šã®æ¸¯ã‚’æŒã£ã¦ã„ã‚‹å ´åˆã€ãƒ¬ãƒ¼ãƒˆæ”¹å–„
   - ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼é–“äº¤æ˜“ï¼šè‡ªç”±äº¤æ¸‰

3. å»ºè¨­ï¼ˆä»»æ„ï¼‰
   - é“è·¯ã€é›†è½ã€éƒ½å¸‚ã®å»ºè¨­
   - ç™ºå±•ã‚«ãƒ¼ãƒ‰ã®è³¼å…¥ãƒ»ä½¿ç”¨

4. ã‚¿ãƒ¼ãƒ³çµ‚äº†
```

### 6. ç‰¹åˆ¥ãƒ«ãƒ¼ãƒ«

#### æœ€é•·äº¤æ˜“è·¯ï¼ˆ2å‹åˆ©ç‚¹ï¼‰
- 5æœ¬ä»¥ä¸Šã®é€£ç¶šã—ãŸé“è·¯ã‚’æŒã¤ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼
- ä»–ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒé•·ã„é“è·¯ã‚’ä½œã£ãŸã‚‰ç§»å‹•

#### æœ€å¤§é¨å£«åŠ›ï¼ˆ2å‹åˆ©ç‚¹ï¼‰
- 3æšä»¥ä¸Šã®é¨å£«ã‚«ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ãŸãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼
- ä»–ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒã‚ˆã‚Šå¤šãä½¿ã£ãŸã‚‰ç§»å‹•

#### ç›—è³Š
- 7ãŒå‡ºãŸã¨ãã€ã¾ãŸã¯é¨å£«ã‚«ãƒ¼ãƒ‰ä½¿ç”¨æ™‚ã«ç§»å‹•
- é…ç½®ã•ã‚ŒãŸã‚¿ã‚¤ãƒ«ã¯è³‡æºã‚’ç”Ÿç”£ã—ãªã„
- éš£æ¥ã™ã‚‹ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‹ã‚‰è³‡æº1æšã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«å¥ªã†

---

## ã‚²ãƒ¼ãƒ è¦ç´ 

### åˆæœŸé…ç½®ãƒ•ã‚§ãƒ¼ã‚º
1. **1å·¡ç›®**ï¼šå„ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒé›†è½1ã¤ + é“è·¯1æœ¬ã‚’é…ç½®ï¼ˆé †ç•ªé€šã‚Šï¼‰
2. **2å·¡ç›®**ï¼šå„ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒé›†è½1ã¤ + é“è·¯1æœ¬ã‚’é…ç½®ï¼ˆé€†é †ï¼‰
3. 2å·¡ç›®ã®é›†è½å‘¨è¾ºã®è³‡æºã‚’åˆæœŸè³‡æºã¨ã—ã¦ç²å¾—

### é…ç½®ãƒ«ãƒ¼ãƒ«
- é›†è½ã¯äº¤å·®ç‚¹ï¼ˆ3ã¤ã®ã‚¿ã‚¤ãƒ«ãŒæ¥ã™ã‚‹ç‚¹ï¼‰ã«é…ç½®
- é›†è½ã¯ä»–ã®é›†è½ã‹ã‚‰2æœ¬åˆ†ä»¥ä¸Šé›¢ã™å¿…è¦ãŒã‚ã‚‹
- é“è·¯ã¯è¾ºï¼ˆ2ã¤ã®ã‚¿ã‚¤ãƒ«ã®å¢ƒç•Œï¼‰ã«é…ç½®
- é“è·¯ã¯è‡ªåˆ†ã®é›†è½/éƒ½å¸‚ã‹ã‚‰é€£ç¶šã—ã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚‹

---

## ãƒ‡ãƒ¼ã‚¿æ§‹é€ è¨­è¨ˆ

### 1. ã‚²ãƒ¼ãƒ ãƒœãƒ¼ãƒ‰

```dart
// å…­è§’å½¢ã‚¿ã‚¤ãƒ«
class HexTile {
  final String id;           // "hex_0", "hex_1", ...
  final TerrainType terrain; // åœ°å½¢ã‚¿ã‚¤ãƒ—
  final int? number;         // æ•°å­—ãƒãƒƒãƒ— (2-12, ç ‚æ¼ ã¯null)
  final Offset position;     // ãƒœãƒ¼ãƒ‰ä¸Šã®åº§æ¨™
  final bool hasRobber;      // ç›—è³ŠãŒã„ã‚‹ã‹
}

enum TerrainType {
  forest,    // æ£®ï¼ˆæœ¨æï¼‰
  hills,     // ä¸˜é™µï¼ˆãƒ¬ãƒ³ã‚¬ï¼‰
  pasture,   // ç‰§è‰åœ°ï¼ˆç¾Šæ¯›ï¼‰
  fields,    // ç•‘ï¼ˆå°éº¦ï¼‰
  mountains, // å±±ï¼ˆé‰±çŸ³ï¼‰
  desert,    // ç ‚æ¼ ï¼ˆè³‡æºãªã—ï¼‰
}

// é ‚ç‚¹ï¼ˆé›†è½/éƒ½å¸‚ã‚’é…ç½®ï¼‰
class Vertex {
  final String id;              // "v_0_0", "v_0_1", ...
  final Offset position;        // ç”»é¢ä¸Šã®åº§æ¨™
  final List<String> adjacentHexIds;  // éš£æ¥ã™ã‚‹ã‚¿ã‚¤ãƒ«ID
  final List<String> adjacentEdgeIds; // éš£æ¥ã™ã‚‹è¾ºID
  Building? building;           // å»ºè¨­ç‰©
}

// è¾ºï¼ˆé“è·¯ã‚’é…ç½®ï¼‰
class Edge {
  final String id;              // "e_0_0", "e_0_1", ...
  final String vertex1Id;       // é ‚ç‚¹1ã®ID
  final String vertex2Id;       // é ‚ç‚¹2ã®ID
  Road? road;                   // é“è·¯
}

// å»ºè¨­ç‰©
class Building {
  final String playerId;
  final BuildingType type;
}

enum BuildingType {
  settlement, // é›†è½ï¼ˆ1VPï¼‰
  city,       // éƒ½å¸‚ï¼ˆ2VPï¼‰
}

// é“è·¯
class Road {
  final String playerId;
}
```

### 2. ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼

```dart
class Player {
  final String id;                    // "player_1", "player_2", ...
  final String name;                  // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å
  final PlayerColor color;            // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚«ãƒ©ãƒ¼
  Map<ResourceType, int> resources;   // æ‰€æŒè³‡æº
  List<DevelopmentCard> developmentCards; // ç™ºå±•ã‚«ãƒ¼ãƒ‰
  int victoryPoints;                  // å‹åˆ©ç‚¹

  // å»ºè¨­ç‰©ã‚«ã‚¦ãƒ³ãƒˆ
  int settlementsBuilt;   // é›†è½ã®æ•°ï¼ˆæœ€å¤§5ï¼‰
  int citiesBuilt;        // éƒ½å¸‚ã®æ•°ï¼ˆæœ€å¤§4ï¼‰
  int roadsBuilt;         // é“è·¯ã®æ•°ï¼ˆæœ€å¤§15ï¼‰

  // ç‰¹åˆ¥ãƒã‚¤ãƒ³ãƒˆ
  bool hasLongestRoad;    // æœ€é•·äº¤æ˜“è·¯
  bool hasLargestArmy;    // æœ€å¤§é¨å£«åŠ›
  int knightsPlayed;      // ä½¿ç”¨ã—ãŸé¨å£«ã‚«ãƒ¼ãƒ‰æ•°
}

enum PlayerColor {
  red,
  blue,
  green,
  yellow,
}

enum ResourceType {
  lumber,  // æœ¨æ
  brick,   // ãƒ¬ãƒ³ã‚¬
  wool,    // ç¾Šæ¯›
  grain,   // å°éº¦
  ore,     // é‰±çŸ³
}
```

### 3. ç™ºå±•ã‚«ãƒ¼ãƒ‰

```dart
class DevelopmentCard {
  final DevelopmentCardType type;
  final bool played;  // ä½¿ç”¨æ¸ˆã¿ã‹
}

enum DevelopmentCardType {
  knight,           // é¨å£«
  victoryPoint,     // å‹åˆ©ç‚¹
  roadBuilding,     // è¡—é“å»ºè¨­
  yearOfPlenty,     // è³‡æºç™ºè¦‹
  monopoly,         // è³‡æºç‹¬å 
}
```

### 4. ã‚²ãƒ¼ãƒ çŠ¶æ…‹

```dart
class GameState {
  final String gameId;
  final List<Player> players;
  final List<HexTile> board;
  final List<Vertex> vertices;
  final List<Edge> edges;
  final List<DevelopmentCard> developmentCardDeck;

  final GamePhase phase;
  final int currentPlayerIndex;
  final int turnNumber;

  final DiceRoll? lastDiceRoll;
  final String? robberHexId;  // ç›—è³Šã®ä½ç½®

  // ãƒ­ã‚°
  final List<GameEvent> eventLog;
}

enum GamePhase {
  setup,           // åˆæœŸé…ç½®ãƒ•ã‚§ãƒ¼ã‚º
  normalPlay,      // é€šå¸¸ãƒ—ãƒ¬ã‚¤
  resourceDiscard, // è³‡æºç ´æ£„ï¼ˆ7ãŒå‡ºãŸã¨ãï¼‰
  robberPlacement, // ç›—è³Šé…ç½®
  gameOver,        // ã‚²ãƒ¼ãƒ çµ‚äº†
}

class DiceRoll {
  final int die1;
  final int die2;
  int get total => die1 + die2;
}

class GameEvent {
  final DateTime timestamp;
  final String playerId;
  final GameEventType type;
  final Map<String, dynamic> data;
}

enum GameEventType {
  diceRolled,
  resourceGained,
  resourceLost,
  buildingPlaced,
  roadPlaced,
  cardPurchased,
  cardPlayed,
  tradeCompleted,
  robberMoved,
}
```

---

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ

### ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹é€ 

```
lib/
â”œâ”€â”€ main.dart                      # ã‚¢ãƒ—ãƒªã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ widgetbook.dart                # Widgetbookï¼ˆé–‹ç™ºç”¨ï¼‰
â”‚
â”œâ”€â”€ models/                        # ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
â”‚   â”œâ”€â”€ game_state.dart
â”‚   â”œâ”€â”€ player.dart
â”‚   â”œâ”€â”€ hex_tile.dart
â”‚   â”œâ”€â”€ vertex.dart
â”‚   â”œâ”€â”€ edge.dart
â”‚   â”œâ”€â”€ building.dart
â”‚   â”œâ”€â”€ development_card.dart
â”‚   â””â”€â”€ game_event.dart
â”‚
â”œâ”€â”€ services/                      # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”œâ”€â”€ game_service.dart         # ã‚²ãƒ¼ãƒ å…¨ä½“ã®ç®¡ç†
â”‚   â”œâ”€â”€ board_generator.dart      # ãƒœãƒ¼ãƒ‰ç”Ÿæˆ
â”‚   â”œâ”€â”€ dice_service.dart         # ã‚µã‚¤ã‚³ãƒ­
â”‚   â”œâ”€â”€ resource_service.dart     # è³‡æºç®¡ç†
â”‚   â”œâ”€â”€ building_service.dart     # å»ºè¨­ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”œâ”€â”€ trading_service.dart      # äº¤æ˜“ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”œâ”€â”€ victory_service.dart      # å‹åˆ©åˆ¤å®š
â”‚   â””â”€â”€ ai_service.dart           # AIï¼ˆå¾ŒæœŸå®Ÿè£…ï¼‰
â”‚
â”œâ”€â”€ repositories/                  # ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–
â”‚   â”œâ”€â”€ game_repository.dart      # ã‚²ãƒ¼ãƒ ä¿å­˜/èª­ã¿è¾¼ã¿
â”‚   â””â”€â”€ settings_repository.dart  # è¨­å®šä¿å­˜
â”‚
â”œâ”€â”€ ui/                            # UIå±¤
â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”œâ”€â”€ home_screen.dart      # ãƒ›ãƒ¼ãƒ ç”»é¢
â”‚   â”‚   â”œâ”€â”€ game_screen.dart      # ã‚²ãƒ¼ãƒ ç”»é¢
â”‚   â”‚   â”œâ”€â”€ setup_screen.dart     # åˆæœŸé…ç½®ç”»é¢
â”‚   â”‚   â””â”€â”€ settings_screen.dart  # è¨­å®šç”»é¢
â”‚   â”‚
â”‚   â”œâ”€â”€ widgets/
â”‚   â”‚   â”œâ”€â”€ board/
â”‚   â”‚   â”‚   â”œâ”€â”€ hex_tile_widget.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ vertex_widget.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ edge_widget.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ building_widget.dart
â”‚   â”‚   â”‚   â””â”€â”€ road_widget.dart
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ player/
â”‚   â”‚   â”‚   â”œâ”€â”€ player_panel.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ resource_display.dart
â”‚   â”‚   â”‚   â””â”€â”€ development_cards_panel.dart
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ actions/
â”‚   â”‚   â”‚   â”œâ”€â”€ dice_roller.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ build_menu.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ trade_dialog.dart
â”‚   â”‚   â”‚   â””â”€â”€ robber_placement.dart
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ common/
â”‚   â”‚       â”œâ”€â”€ game_log.dart
â”‚   â”‚       â””â”€â”€ turn_indicator.dart
â”‚   â”‚
â”‚   â””â”€â”€ painters/
â”‚       â”œâ”€â”€ hex_painter.dart
â”‚       â”œâ”€â”€ board_painter.dart
â”‚       â””â”€â”€ road_painter.dart
â”‚
â””â”€â”€ utils/                         # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
    â”œâ”€â”€ constants.dart            # å®šæ•°
    â”œâ”€â”€ colors.dart               # ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ
    â””â”€â”€ hex_math.dart             # å…­è§’å½¢ã®åº§æ¨™è¨ˆç®—
```

### çŠ¶æ…‹ç®¡ç†

**ä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³: Provider + ChangeNotifier**

```dart
// ã‚²ãƒ¼ãƒ çŠ¶æ…‹ã‚’ç®¡ç†
class GameController extends ChangeNotifier {
  GameState _state;
  final GameService _gameService;
  final GameRepository _repository;

  // ã‚²ãƒ¼ãƒ ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
  Future<void> rollDice();
  Future<void> buildSettlement(String vertexId);
  Future<void> buildRoad(String edgeId);
  Future<void> upgradeToCity(String vertexId);
  Future<void> buyDevelopmentCard();
  Future<void> playDevelopmentCard(DevelopmentCard card);
  Future<void> proposeTrade(TradeOffer offer);

  // ã‚²ãƒ¼ãƒ ç®¡ç†
  Future<void> saveGame();
  Future<void> loadGame(String gameId);
  Future<void> newGame(List<String> playerNames);
  Future<void> endTurn();
}
```

---

## UIè¨­è¨ˆ

### ç”»é¢ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ã‚«ã‚¿ãƒ³                        [ä¿å­˜] [è¨­å®š]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Player 1 (èµ¤) â”‚  â”‚                         â”‚â”‚
â”‚  â”‚ å‹åˆ©ç‚¹: 3     â”‚  â”‚    å…­è§’å½¢ãƒœãƒ¼ãƒ‰         â”‚â”‚
â”‚  â”‚ ğŸŒ²:2 ğŸ§±:3     â”‚  â”‚                         â”‚â”‚
â”‚  â”‚ ğŸ‘:1 ğŸŒ¾:0     â”‚  â”‚      (ä¸­å¤®é…ç½®)         â”‚â”‚
â”‚  â”‚ â›°ï¸:1         â”‚  â”‚                         â”‚â”‚
â”‚  â”‚               â”‚  â”‚                         â”‚â”‚
â”‚  â”‚ ğŸƒ ç™ºå±•ã‚«ãƒ¼ãƒ‰ â”‚  â”‚                         â”‚â”‚
â”‚  â”‚ é¨å£« x2       â”‚  â”‚                         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ã‚¢ã‚¯ã‚·ãƒ§ãƒ³                                â”‚  â”‚
â”‚  â”‚ [ğŸ²ã‚µã‚¤ã‚³ãƒ­] [ğŸ å»ºè¨­] [ğŸ”„äº¤æ˜“] [ğŸƒã‚«ãƒ¼ãƒ‰]â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ãƒ­ã‚°:                                     â”‚  â”‚
â”‚  â”‚ Player 1 ãŒã‚µã‚¤ã‚³ãƒ­ã‚’æŒ¯ã£ãŸ: 8            â”‚  â”‚
â”‚  â”‚ Player 1 ãŒæœ¨æx2ã‚’ç²å¾—                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å…­è§’å½¢ãƒœãƒ¼ãƒ‰æç”»

```
   / \     / \     / \
  /   \   /   \   /   \
 /  3  \ /  6  \ /  11 \
 \     / \     / \     /
  \   /   \   /   \   /
   \ /  4  \ /  8  \ /
   / \     / \     / \
  /   \   /   \   /   \
 /  9  \ /  5  \ / 10  \
 \     / \     / \     /
  \   /   \   /   \   /
   \ /  2  \ /  12 \ /
```

### ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆï¼ˆç°¡æ˜“ï¼‰

```dart
// ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚«ãƒ©ãƒ¼
const playerColors = {
  PlayerColor.red: Color(0xFFE53935),
  PlayerColor.blue: Color(0xFF1E88E5),
  PlayerColor.green: Color(0xFF43A047),
  PlayerColor.yellow: Color(0xFFFDD835),
};

// åœ°å½¢ã‚«ãƒ©ãƒ¼
const terrainColors = {
  TerrainType.forest: Color(0xFF2E7D32),     // æ¿ƒã„ç·‘
  TerrainType.hills: Color(0xFFD84315),      // ãƒ¬ãƒ³ã‚¬è‰²
  TerrainType.pasture: Color(0xFF9CCC65),    // æ˜ã‚‹ã„ç·‘
  TerrainType.fields: Color(0xFFFDD835),     // é»„è‰²
  TerrainType.mountains: Color(0xFF616161),  // ç°è‰²
  TerrainType.desert: Color(0xFFFFCC80),     // ç ‚è‰²
};
```

---

## å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º

### ãƒ•ã‚§ãƒ¼ã‚º1: åŸºç›¤æ§‹ç¯‰ï¼ˆ2é€±é–“ï¼‰
- âœ… ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ä½œæˆ
- âœ… ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«å®Ÿè£…
- âœ… å…­è§’å½¢ãƒœãƒ¼ãƒ‰ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯
- âœ… åŸºæœ¬çš„ãªUIï¼ˆãƒœãƒ¼ãƒ‰è¡¨ç¤ºã®ã¿ï¼‰
- âœ… JSONã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º/ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º

**æˆæœç‰©**: é™çš„ãªãƒœãƒ¼ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹

### ãƒ•ã‚§ãƒ¼ã‚º2: åˆæœŸé…ç½®ï¼ˆ1é€±é–“ï¼‰
- âœ… é ‚ç‚¹ãƒ»è¾ºã®ã‚¿ãƒƒãƒ—æ¤œå‡º
- âœ… é›†è½ãƒ»é“è·¯ã®é…ç½®ãƒ­ã‚¸ãƒƒã‚¯
- âœ… é…ç½®ãƒ«ãƒ¼ãƒ«ã®æ¤œè¨¼
- âœ… åˆæœŸè³‡æºã®é…å¸ƒ

**æˆæœç‰©**: 2äººãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã§åˆæœŸé…ç½®ãŒã§ãã‚‹

### ãƒ•ã‚§ãƒ¼ã‚º3: åŸºæœ¬ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—ï¼ˆ2é€±é–“ï¼‰
- âœ… ã‚µã‚¤ã‚³ãƒ­æ©Ÿèƒ½
- âœ… è³‡æºç”Ÿç”£ãƒ­ã‚¸ãƒƒã‚¯
- âœ… å»ºè¨­ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆé“è·¯ã€é›†è½ã€éƒ½å¸‚ï¼‰
- âœ… ã‚¿ãƒ¼ãƒ³ç®¡ç†
- âœ… å‹åˆ©ç‚¹è¨ˆç®—

**æˆæœç‰©**: åŸºæœ¬çš„ãªã‚²ãƒ¼ãƒ ãŒå®Œçµã™ã‚‹

### ãƒ•ã‚§ãƒ¼ã‚º4: äº¤æ˜“ã‚·ã‚¹ãƒ†ãƒ ï¼ˆ1é€±é–“ï¼‰
- âœ… éŠ€è¡Œäº¤æ˜“
- âœ… ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼é–“äº¤æ˜“UI
- âœ… æ¸¯ã®å®Ÿè£…

**æˆæœç‰©**: äº¤æ˜“ãŒå¯èƒ½ã«ãªã‚‹

### ãƒ•ã‚§ãƒ¼ã‚º5: ç™ºå±•ã‚«ãƒ¼ãƒ‰ï¼ˆ1é€±é–“ï¼‰
- âœ… ç™ºå±•ã‚«ãƒ¼ãƒ‰è³¼å…¥
- âœ… ã‚«ãƒ¼ãƒ‰åŠ¹æœå®Ÿè£…
- âœ… æœ€é•·äº¤æ˜“è·¯ãƒ»æœ€å¤§é¨å£«åŠ›

**æˆæœç‰©**: ã™ã¹ã¦ã®ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ«ãŒå®Ÿè£…ã•ã‚Œã‚‹

### ãƒ•ã‚§ãƒ¼ã‚º6: ç›—è³Šã¨7ã®å‡¦ç†ï¼ˆ1é€±é–“ï¼‰
- âœ… ç›—è³Šç§»å‹•
- âœ… è³‡æºç ´æ£„
- âœ… è³‡æºå¼·å¥ª

**æˆæœç‰©**: å®Œå…¨ãªãƒ«ãƒ¼ãƒ«å®Ÿè£…

### ãƒ•ã‚§ãƒ¼ã‚º7: UI/UXæ”¹å–„ï¼ˆ1é€±é–“ï¼‰
- âœ… ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¿½åŠ 
- âœ… ã‚µã‚¦ãƒ³ãƒ‰ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
- âœ… ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«
- âœ… ã‚²ãƒ¼ãƒ ãƒ­ã‚°å¼·åŒ–

**æˆæœç‰©**: ãƒ—ãƒ¬ã‚¤ã—ã‚„ã™ã„UI

### ãƒ•ã‚§ãƒ¼ã‚º8: ã‚»ãƒ¼ãƒ–/ãƒ­ãƒ¼ãƒ‰ï¼ˆ1é€±é–“ï¼‰
- âœ… JSONãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜
- âœ… ã‚²ãƒ¼ãƒ å†é–‹æ©Ÿèƒ½
- âœ… è¤‡æ•°ã‚²ãƒ¼ãƒ ç®¡ç†

**æˆæœç‰©**: ã„ã¤ã§ã‚‚ä¸­æ–­ãƒ»å†é–‹å¯èƒ½

### ãƒ•ã‚§ãƒ¼ã‚º9: AIãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼ˆ3-4é€±é–“ï¼‰
- âœ… åŸºæœ¬çš„ãªAIæˆ¦ç•¥
- âœ… å»ºè¨­å„ªå…ˆåº¦ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
- âœ… äº¤æ˜“åˆ¤æ–­ãƒ­ã‚¸ãƒƒã‚¯
- âœ… é›£æ˜“åº¦ãƒ¬ãƒ™ãƒ«

**æˆæœç‰©**: 1äººãƒ—ãƒ¬ã‚¤ãŒå¯èƒ½

### ãƒ•ã‚§ãƒ¼ã‚º10: æœ€é©åŒ–ã¨ãƒ†ã‚¹ãƒˆï¼ˆ1é€±é–“ï¼‰
- âœ… ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- âœ… ãƒã‚°ä¿®æ­£
- âœ… ãƒãƒ«ãƒãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼ˆ3-4äººï¼‰å¯¾å¿œ

---

## JSONãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ 

### ã‚²ãƒ¼ãƒ çŠ¶æ…‹ãƒ•ã‚¡ã‚¤ãƒ« (game_state.json)

```json
{
  "gameId": "game_20250104_001",
  "version": "1.0",
  "createdAt": "2025-01-04T10:30:00Z",
  "updatedAt": "2025-01-04T11:15:00Z",

  "phase": "normalPlay",
  "currentPlayerIndex": 0,
  "turnNumber": 5,

  "players": [
    {
      "id": "player_1",
      "name": "Alice",
      "color": "red",
      "resources": {
        "lumber": 2,
        "brick": 3,
        "wool": 1,
        "grain": 0,
        "ore": 1
      },
      "developmentCards": [
        {"type": "knight", "played": false},
        {"type": "knight", "played": true}
      ],
      "victoryPoints": 3,
      "settlementsBuilt": 2,
      "citiesBuilt": 0,
      "roadsBuilt": 4,
      "hasLongestRoad": true,
      "hasLargestArmy": false,
      "knightsPlayed": 1
    },
    {
      "id": "player_2",
      "name": "Bob",
      "color": "blue",
      "resources": {
        "lumber": 1,
        "brick": 0,
        "wool": 2,
        "grain": 3,
        "ore": 0
      },
      "developmentCards": [],
      "victoryPoints": 2,
      "settlementsBuilt": 2,
      "citiesBuilt": 0,
      "roadsBuilt": 2,
      "hasLongestRoad": false,
      "hasLargestArmy": false,
      "knightsPlayed": 0
    }
  ],

  "board": {
    "hexTiles": [
      {
        "id": "hex_0",
        "terrain": "forest",
        "number": 3,
        "position": {"x": 0, "y": 0},
        "hasRobber": false
      },
      {
        "id": "hex_1",
        "terrain": "desert",
        "number": null,
        "position": {"x": 1, "y": 0},
        "hasRobber": true
      }
      // ... ä»–ã®ã‚¿ã‚¤ãƒ«
    ],

    "vertices": [
      {
        "id": "v_0_0",
        "position": {"x": 100, "y": 50},
        "adjacentHexIds": ["hex_0", "hex_1", "hex_2"],
        "adjacentEdgeIds": ["e_0_0", "e_0_1", "e_0_2"],
        "building": {
          "playerId": "player_1",
          "type": "settlement"
        }
      }
      // ... ä»–ã®é ‚ç‚¹
    ],

    "edges": [
      {
        "id": "e_0_0",
        "vertex1Id": "v_0_0",
        "vertex2Id": "v_0_1",
        "road": {
          "playerId": "player_1"
        }
      }
      // ... ä»–ã®è¾º
    ]
  },

  "developmentCardDeck": [
    {"type": "knight"},
    {"type": "knight"},
    {"type": "victoryPoint"},
    {"type": "roadBuilding"}
    // ... æ®‹ã‚Šã®ã‚«ãƒ¼ãƒ‰
  ],

  "robberHexId": "hex_1",

  "lastDiceRoll": {
    "die1": 4,
    "die2": 4
  },

  "eventLog": [
    {
      "timestamp": "2025-01-04T11:14:30Z",
      "playerId": "player_1",
      "type": "diceRolled",
      "data": {"die1": 4, "die2": 4}
    },
    {
      "timestamp": "2025-01-04T11:14:35Z",
      "playerId": "player_1",
      "type": "resourceGained",
      "data": {"resource": "lumber", "amount": 2}
    }
  ]
}
```

### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ« (settings.json)

```json
{
  "soundEnabled": true,
  "musicEnabled": false,
  "animationsEnabled": true,
  "language": "ja",
  "defaultPlayerNames": ["Player 1", "Player 2", "Player 3", "Player 4"]
}
```

### ã‚²ãƒ¼ãƒ å±¥æ­´ãƒ•ã‚¡ã‚¤ãƒ« (game_history.json)

```json
{
  "games": [
    {
      "gameId": "game_20250104_001",
      "startedAt": "2025-01-04T10:30:00Z",
      "finishedAt": "2025-01-04T11:45:00Z",
      "winner": "player_1",
      "players": ["Alice", "Bob"],
      "filePath": "saves/game_20250104_001.json"
    }
  ]
}
```

---

## æŠ€è¡“çš„æ¤œè¨äº‹é …

### å…­è§’å½¢ã®åº§æ¨™è¨ˆç®—

**Axialåº§æ¨™ç³»**ã‚’ä½¿ç”¨ï¼š
```dart
class HexCoordinate {
  final int q; // åˆ—
  final int r; // è¡Œ

  // ã‚¹ã‚¯ãƒªãƒ¼ãƒ³åº§æ¨™ã¸ã®å¤‰æ›
  Offset toPixel(double hexSize) {
    final x = hexSize * (3.0 / 2.0 * q);
    final y = hexSize * (sqrt(3) / 2.0 * q + sqrt(3) * r);
    return Offset(x, y);
  }
}
```

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

- **CustomPainter**ã§ãƒœãƒ¼ãƒ‰å…¨ä½“ã‚’æç”»
- **RepaintBoundary**ã§éƒ¨åˆ†çš„ãªå†æç”»ã‚’åˆ¶å¾¡
- å¤§ããªã‚²ãƒ¼ãƒ çŠ¶æ…‹ã¯**Freezed**ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ä¸å¤‰æ€§ã‚’ä¿è¨¼
- JSONã®èª­ã¿æ›¸ãã¯**isolate**ã§éåŒæœŸå‡¦ç†

### ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

- **Unit Test**: ã‚²ãƒ¼ãƒ ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆè³‡æºè¨ˆç®—ã€å‹åˆ©åˆ¤å®šãªã©ï¼‰
- **Widget Test**: UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- **Integration Test**: ã‚²ãƒ¼ãƒ å…¨ä½“ã®æµã‚Œ
- **Golden Test**: ãƒœãƒ¼ãƒ‰ã®æç”»çµæœ

---

## ã¾ã¨ã‚

ã“ã®è¨ˆç”»æ›¸ã«å¾“ã£ã¦æ®µéšçš„ã«å®Ÿè£…ã™ã‚‹ã“ã¨ã§ã€ä»¥ä¸‹ã‚’é”æˆã§ãã¾ã™ï¼š

1. âœ… ã‚·ãƒ³ãƒ—ãƒ«ã§åˆ†ã‹ã‚Šã‚„ã™ã„UI
2. âœ… å®Œå…¨ãªã‚«ã‚¿ãƒ³ãƒ«ãƒ¼ãƒ«ã®å®Ÿè£…
3. âœ… JSONãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚ˆã‚‹æŸ”è»Ÿãªä¿å­˜/èª­ã¿è¾¼ã¿
4. âœ… å°†æ¥çš„ãªAIå®Ÿè£…ã«å¯¾å¿œã—ãŸè¨­è¨ˆ
5. âœ… ãƒ†ã‚¹ãƒˆå¯èƒ½ã§ä¿å®ˆã—ã‚„ã™ã„ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ï¼š
- ãƒ•ã‚§ãƒ¼ã‚º1ã‹ã‚‰é †ç•ªã«å®Ÿè£…é–‹å§‹
- Widgetbookã§å„UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å€‹åˆ¥é–‹ç™º
- GitHub Actionsã§ç¶™ç¶šçš„ã« APK ã‚’ãƒ“ãƒ«ãƒ‰

## å‚è€ƒè³‡æ–™

- [ã‚«ã‚¿ãƒ³å…¬å¼ãƒ«ãƒ¼ãƒ«](https://www.catan.jp/)
- [Flutter CustomPaint](https://api.flutter.dev/flutter/widgets/CustomPaint-class.html)
- [Provider ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸](https://pub.dev/packages/provider)
- [Freezed ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸](https://pub.dev/packages/freezed)
